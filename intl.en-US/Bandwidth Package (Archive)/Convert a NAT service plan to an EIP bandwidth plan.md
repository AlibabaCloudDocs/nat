# Convert a NAT service plan to an EIP bandwidth plan

You can convert an existing NAT service plan to an EIP bandwidth plan. EIP bandwidth plans support bandwidth sharing and transferring on a regional scale. After you purchase an EIP bandwidth plan, you can add all elastic IP addresses \(EIPs\) that are in the same region to the EIP bandwidth plan. This way, the EIPs can share the bandwidth of the EIP bandwidth plan. This saves bandwidth costs.

## Considerations

When you convert a NAT service plan to an EIP bandwidth plan, no network disconnections occur. Therefore, your workloads are not affected. After conversion:

-   The public IP addresses in the NAT service plan are converted to EIPs.
-   The NAT service plan is converted to an EIP bandwidth plan, which is easier to manage and more cost-effective.
-   If the conversion fails, you can continue to use the NAT service plan. If you fail to locate the cause of the conversion failure, [submit a ticket](https://workorder-intl.console.aliyun.com/#/ticket/createIndex). When you submit a ticket, you must provide the following information:
    -   Your account ID or UID.
    -   The request ID generated by Alibaba Cloud when you call the ConvertBandwidthPackage operation.
    -   The ID of the NAT service plan that failed to be converted.
    -   The screenshot of the conversion failure.

## Prerequisites

Before you convert a NAT service plan, make sure that the following requirements are met:

-   The permissions to convert NAT service plans are acquired by your account.

    We recommend that you use an Alibaba Cloud account to convert NAT service plans. If you convert the NAT service plan as a Resource Access Management \(RAM\) user, you must use your Alibaba Cloud account to attach the following policies to your RAM user in the [RAM](https://ram.console.aliyun.com/users) console.

    -   AliyunNATGatewayFullAccess
    -   AliyunEIPFullAccess
    -   AliyunCommonBandwidthPackageFullAccess

        ![Authorize](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/en-US/7896359851/p96384.png)

-   Unused EIPs are sufficient within your account.

    After the NAT service plan is converted to an EIP bandwidth plan, the public IP addresses in the NAT service plan are converted to EIPs. Make sure that the number of EIPs is greater than or equal to the number of public IP addresses in the NAT service plan. In the Virtual Private Cloud \(VPC\) console, you can view the number of EIPs on the [Quota Management](https://vpc.console.aliyun.com/quota) page. If the number of EIPs is insufficient, you can apply for more EIPs in the VPC console.

    ![Quota Management](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/en-US/7896359851/p96382.png)

-   Your account is in the whitelist if the NAT service plan is charged on a pay-by-traffic basis.

    If the NAT service plan to be converted is billed on a pay-by-data-transfer basis, [submit a ticket](https://workorder-intl.console.aliyun.com/#/ticket/createIndex) to apply for the permissions that are used to convert the NAT service plan.

-   The information about the NAT service plan is backed up.

    Before you convert your NAT service plan, fill out the following table with the NAT service plan information. This way, you can track the conversion progress and verify the result.

    |ID of the NAT service plan|Region|Bandwidth limit|Number of public IP addresses|Conversion state|ID of the EIP bandwidth plan|
    |--------------------------|------|---------------|-----------------------------|----------------|----------------------------|
    |bwp-xxx1|China \(Hangzhou\)|200 Mbps|20|Successful|cbwp-xxx1|
    |bwp-xxx2|China \(Shanghai\)|500 Mbps|50|Pending|N/A|


## Procedure

After the prerequisites are met, perform the following operations to start the conversion:

1.  Call the ConvertBandwidthPackage operation to complete the conversion. For more information, see [ConvertBandwidthPackage](/intl.en-US/API reference/NAT Gateway/ConvertBandwidthPackage.md).

2.  Verify the conversion result.

    You can check the ID of the EIP bandwidth plan to verify that the conversion is successful. IDs of NAT service plans are converted based on the following rule: `${cbwpId}='c'+${bwpId}`. For example, if the ID of the NAT service plan is `${bwpId}=bwp-e8caejcj`, the ID of the EIP bandwidth plan is `cbwp-e8caejcj`.

3.  After the NAT service plan is converted, go to the NAT Gateway tab on the Quota Management page and apply for the **natgw\_privilege\_allow\_bind\_eip** permission.

    The application is automatically reviewed. Wait 1 minute and click the Refresh icon. The latest status of the application appears.

    **Note:** If you want to associate other EIPs with the NAT gateway after you apply for the **natgw\_privilege\_allow\_bind\_eip** permission, log off from the NAT Gateway console and log on again. Then, you can associate the EIPs with the NAT gateway. For more information, see [Associate an EIP with a NAT gateway](/intl.en-US/User Guide/Create NAT gateways.md).

    ![Permissions that are used to associate EIPs with NAT gateways](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/en-US/7896359851/p96400.png)


