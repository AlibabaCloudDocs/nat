# 概述 {#concept_pnw_cdl_32b .concept}

NAT网关支持SNAT功能，为VPC内无公网IP的ECS实例提供访问互联网的代理服务。

## SNAT条目 {#section_qnw_cdl_32b .section}

您可以通过在SNAT表中创建SNAT条目，实现代理上网功能。

每个SNAT条目由以下两部分组成：

-   **交换机或ECS实例**：需要提供SNAT代理服务的交换机或ECS实例。
-   **公网IP**：用来提供互联网访问的公网IP。

    **说明：** 

    -   支持选择多个公网IP，多公网IP构建SNAT IP地址池。当VPC ECS主动发起对外的访问连接时，VPC ECS会随机通过SNAT地址池中的公网IP地址访问互联网。
    -   对于2017年11月3日之前账户下存在NAT带宽包的用户，SNAT条目中的公网IP为NAT带宽包提供的公网IP。

## 交换机粒度和ECS粒度 {#section_g9i_j7e_7cx .section}

SNAT功能提供如下两种粒度，以实现VPC内ECS实例访问互联网。

-   交换机粒度

    选择交换机为粒度创建SNAT条目后，当指定交换机下的ECS实例发起互联网访问请求时，NAT网关会为其提供SNAT服务（代理上网服务），且使用的公网IP为指定的公网IP。默认情况，交换机下的所有ECS实例都可以使用配置的公网IP访问互联网。

    **说明：** 如果ECS实例已经持有了公网IP（如分配了固定公网IP、绑定EIP和设置了DNAT IP映射），当该ECS实例发起互联网访问时，会优先通过持有的公网IP访问互联网，而不会使用NAT网关的SNAT功能访问互联网。如需统一公网出口IP，请参见[为已分配固定公网IP的ECS实例统一公网出口IP](../../../../cn.zh-CN/最佳实践/统一公网出口IP/为已分配固定公网IP的ECS实例统一公网出口IP.md#)、[为绑定了EIP的ECS实例统一公网出口IP](../../../../cn.zh-CN/最佳实践/统一公网出口IP/为已绑定EIP的ECS实例统一公网出口IP.md#)和[为设置了DNAT IP映射的ECS实例统一公网出口IP](../../../../cn.zh-CN/最佳实践/统一公网出口IP/为设置了DNAT IP映射的ECS实例统一公网出口IP.md#)。

-   ECS粒度

    选择ECS为粒度创建SNAT条目后，指定的ECS实例通过配置的公网IP访问互联网。当指定的ECS实例发起互联网访问请求时，NAT网关会为其提供SNAT服务（代理上网服务），且使用的公网IP为指定的公网IP。


